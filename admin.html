<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>Admin</title><script type="module" src="./firebase.js"></script></head>
<body>
  <h2>Admin Panel</h2>
  <button id="logoutBtn">Logout</button>
  <p>Welcome Admin! (You can add course mgmt here later)</p>

  <script type="module">
    import { auth, db, onAuthStateChanged, signOut, doc, getDoc } from './firebase.js';
    onAuthStateChanged(auth, async (user)=>{
      if(!user){window.location.href="login.html";return;}
      const snap = await getDoc(doc(db,"users",user.uid));
      if(!snap.exists() || snap.data().role!=="admin"){
        alert("Not authorized");
        await signOut(auth);
        window.location.href="login.html";
      }
    });
    document.getElementById("logoutBtn").onclick=async()=>{await signOut(auth);window.location.href="login.html";}
  </script>
</body>
</html>
